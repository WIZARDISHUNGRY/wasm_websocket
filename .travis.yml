
language: go

env:
- GO111MODULE=on

go:
- 1.13.x
- tip

addons:
  chrome: stable

cache:
  directories:
  - $GOPATH

install:
- go get github.com/agnivade/wasmbrowsertest
- cp $GOPATH/bin/wasmbrowsertest $GOPATH/bin/go_js_wasm_exec
- export PATH=$GOPATH/bin:$PATH

script:
- export GOOS=js GOARCH=wasm
- go vet .
- gofmt -l -s -w .
- GOOS=js GOARCH=wasm go test -exec wasmbrowsertest -v .
